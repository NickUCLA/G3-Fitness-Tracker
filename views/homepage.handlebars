{{#each users as |user| }}
<div class="row align-center mb-5">
  <div class="col-md-6">
    <h2>Hello {{user.name}}</h2>
  </div>
  <div class="col-md-6">
    <h1>Submit Workout Activity</h1>
    <form action="/submit" method="POST">
      <label for="exerciseType">Exercise Type:</label>
      <input type="text" id="exerciseType" name="exercise_type" required><br><br>

      <label for="workoutDescription">Workout Description:</label>
      <input type="text" id="workoutDescription" name="description" required><br><br>

      <label for="weight">Weight:</label>
      <input type="number" id="weight" name="weight" step="0.5" required>
      <select name="weight_unit" required>
        <option value="kg">kg</option>
        <option value="lbs">lbs</option>
      </select><br><br>
      <input type="submit" value="Submit">
    </form>
  </div>
  <div class="past-workouts">
    <h1>Past Workouts</h1>
    <ul>
      {{#each workouts as |workout| }}
      <li>{{ workout.exercise_type }} - {{ workout.description }} - {{ workout.weight }} {{ workout.weight_unit }}</li>
      {{/each}}
    </ul>
  </div>
  <h3>Need a Workout Idea?</h3>
  <label for="duration">Duration (in minutes):</label>
  <input type="number" id="duration" min="1" required><br><br>
  <label for="type">Type of Workout:</label>
  <select id="type">
    <option value="cardio">Cardio</option>
    <option value="strength">Strength</option>
    <option value="flexibility">Flexibility</option>
    <option value="full-body">Full Body</option>
  </select><br><br>
  <button class="btn" id="submit-workout">Generate My Workout</button>
  <div id="generatedWorkout"></div>

  <button class="btn" id="submit-meal">Generate My Meal</button>
  <div id="generatedMeal"></div>
  <script>
document.getElementById('submit-workout').addEventListener('click', generateWorkout);

function generateWorkout() {
  const duration = document.getElementById('duration').value;
  const type = document.getElementById('type').value;

  fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer API_KEY_HERE'
    },
    body: JSON.stringify({
      model: 'gpt-3.5-turbo',
      messages: [
        {
          role: 'system',
          content: 'You are a helpful fitness assistant that generates 30-minute workouts.'
        },
        {
          role: 'user',
          content: `Generate a ${duration}-minute ${type} workout for me.`
        }
      ]
    })
  })
  .then(response => response.json())
  .then(data => {
    const generatedWorkout = data.choices[0].message.content;
    document.getElementById('generatedWorkout').innerText = generatedWorkout;
  })
  .catch(error => console.error('Error:', error));
}
    document.getElementById('submit-meal').addEventListener('click', generateMeal);
    function generateMeal() {
      fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer API_KEY_HERE'
        },
        body: JSON.stringify({
          model: 'gpt-3.5-turbo',
          messages: [
            {
              role: 'system',
              content: 'You are a helpful assistant that generates quick healthy recipes for me.'
            },
            {
              role: 'user',
              content: 'Generate a healthy recipe for me.'
            }
          ]
        })
      })
        .then(response => response.json())
        .then(data => {
          const generatedWorkout = data.choices[0].message.content;
          document.getElementById('generatedMeal').innerText = generatedWorkout;
        })
        .catch(error => console.error('Error:', error));
    }
  </script>
</div>
{{/each}}